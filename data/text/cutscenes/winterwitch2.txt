#include intrographics_justladyluck.txt
#include mariahcareybiggraphics.txt

setdatapath("data/graphics/cutscenes/witch/");

var witchgraphics = {
	idle: {
		animation: "witch_idle.json",
		pack: "witch.pck",
		loop: true
	},
	worried_idle: {
		animation: "witch_worried_idle.json",
		pack: "witch.pck",
		loop: true
	},
	transform: {
		animation: "witch_transform.json",
		pack: "witch.pck",
		speed: 2,
		loop: false
	}
}
var witch = addsprite("witch", 1, witchgraphics);

// HELPER FUNCTIONS

var fade_time = 0.4;

// ACTORS
actor("Mariah Carey", screenwidthmid + 800, 550, Col.YELLOW, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
actor("Witch", 2680, 730, 0xb496ec, CENTER, BOTTOM, "chat_witch", "characters/witch/charicon_witch");
// INTRO

play("music_cutscene_cheery");

witch.scale = 0.5;
witch.x = 2700 - ((witch.getwidth("idle") * witch.scale) / 2);
witch.y = 650;
changebackground("intro_stage");
fadein();
witch.show("idle");

mariahcarey_big.x = -screenwidth;
mariahcarey_big.show("idle");
Actuate.tween(mariahcarey_big, 2, { x: 0 }).ease(Expo.easeOut);

wait(0.5);
 
mariahcarey_big.show("talking", true);
actor("Mariah Carey", screenwidthmid + 350, 700, Col.YELLOW, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
speak("Mariah Carey", "Oh, my dear Witch...");
mariahcarey_big.show("talking-confused", true);
speak("Mariah Carey", "I... kind of messed up your episode.", "normal");
mariahcarey_big.show("idle", true);

speak("Witch", "Wha- how!?", "action");
speak("Witch", "I mean, does it at least work?", "normal");

mariahcarey_big.show("talking", true);
speak("Mariah Carey", "Well, yes! I've traded your|spellbook for normal equipment!", "normal");
speak("Mariah Carey", "That's great, right?");
mariahcarey_big.show("idle", true);

speak("Witch", "Not exactly.", "action");
speak("Witch", "...please tell me that's all you messed up.");

mariahcarey_big.show("talking-scary", true);
actor("Mariah Carey", screenwidthmid + 350, 700, Col.RED, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
speak("Mariah Carey", "[red]THAT WASN'T A MISTAKE! I JUST|[red]WANTED TO GIVE YOU AN EASIER TIME!", "normal");
speak("Mariah Carey", "[red]YOU SHOULD BE THANKFUL,|[red]YOU UNGRATEFUL BRA-");
mariahcarey_big.show("talking", true);
actor("Mariah Carey", screenwidthmid + 350, 700, Col.YELLOW, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
speak("Mariah Carey", "Oh, um... yeah, about the mistake... I misclicked and|added a ton of Wizard's items to your pool.");
speak("Mariah Carey", "But now you get Wizard's loadout no matter|what items are in your inventory!", "normal");
speak("Mariah Carey", "So it all works out in the end.", "normal");
mariahcarey_big.show("idle", true);

speak("Witch", "Oh.", "normal");
speak("Witch", "...I guess it can't hurt to try a new setup?", "normal");

startgamefromcutscene();