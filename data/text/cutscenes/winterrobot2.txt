// SETUP

setdatapath("data/graphics/cutscenes/intro/");
addbackground("intro_stage", {animation: "background_stage.json", pack: "background_stage.pck"});
#include mariahcareybiggraphics.txt

setdatapath("data/graphics/cutscenes/robot/");

var robotgraphics = {
	idle: {
		animation: "robot_idle.json",
		pack: "robot.pck",
		loop: true
	},
	worried_idle: {
		animation: "robot_worried_idle.json",
		pack: "robot.pck",
		loop: true
	}
}
var robot = addsprite("robot", 1, robotgraphics);

// HELPER FUNCTIONS	

var fade_time = 0.4;

// ACTORS
actor("Mariah Carey", screenwidthmid + 800, 550, Col.YELLOW, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
actor("Robot", 2600, 780, 0xDDDDDD, CENTER, BOTTOM, "chat_robot", "characters/robot/charicon_robot");

// INTRO

play("music_cutscene_cheery");

robot.scale = 0.5;
robot.x = 2700 - ((robot.getwidth("idle") * robot.scale) / 2);
robot.y = 800;
changebackground("intro_stage");
fadein();
robot.show("idle");

mariahcarey_big.x = -screenwidth;
mariahcarey_big.show("idle");
Actuate.tween(mariahcarey_big, 2, { x: 0 }).ease(Expo.easeOut);
play("cutscene_audience");

wait(0.5);

mariahcarey_big.show("talking", true);
actor("Mariah Carey", screenwidthmid + 350, 700, Col.YELLOW, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
speak("Mariah Carey", "Let's welcome the Robot back on stage...");
mariahcarey_big.show("talking-sly", true);
speak("Mariah Carey", "To a brand new episode made by me!", "normal");
mariahcarey_big.show("talking-confused", true);
speak("Mariah Carey", "...Well, sort of. My marketing team tidied things up a bit.");
speak("Mariah Carey", "And they accidentally made it so you can't roll 1 through 6.", "normal");
speak("Mariah Carey", "and you roll negative dice now and up to 12");
mariahcarey_big.show("talking-sly", true);
speak("Mariah Carey", "My idea was that you could roll normally|without calculating, as a gift.", "normal");
mariahcarey_big.show("idle", true);

actor("Robot", 2600, 780, 0xDDDDDD, CENTER, BOTTOM, "chat_robot", "characters/robot/charicon_robot");
robot.show("worried_idle");
speak("Robot", "What!?");
speak("Robot", "This throws off everything!");

mariahcarey_big.show("talking", true);
actor("Mariah Carey", screenwidthmid + 350, 700, Col.YELLOW, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
speak("Mariah Carey", "Well, it would have been fine, if|only Dave from PR didn't step in.");
mariahcarey_big.show("talking-angry", true);
speak("Mariah Carey", "Otherwise, this would've been perfect!", "normal");
mariahcarey_big.show("idle", true);

speak("Robot", "I meant the not calculating thing, but that too.", "worried");
speak("Robot", "Well in I go I guess-", "worried").dismiss_in = 0.6;

mariahcarey_big.show("talking-scary", true);
actor("Mariah Carey", screenwidthmid + 350, 700, Col.RED, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
speak("Mariah Carey", "[red]NO, THATS MY LINE", "normal");
mariahcarey_big.show("talking", true);
actor("Mariah Carey", screenwidthmid + 350, 700, Col.YELLOW, CENTER, BOTTOM, "chat_mariahcarey", "characters/misc/charicon_mariahcarey");
speak("Mariah Carey", "I, uh, I mean, in you go!", "normal");
mariahcarey_big.show("idle", true);

startgamefromcutscene();